appId: com.borrowhood.app
---
# Gate Journey: Free user -> "My Town" -> Upgrade Overlay -> SubscriptionScreen (step 1/2)
# Validates that a free user tapping "My Town" triggers the upgrade overlay,
# and the CTA navigates to SubscriptionScreen with stepper at step 1.

- runFlow: flows/auth/login-free.yaml

# Tap visibility chip to open the visibility ActionSheet
- tapOn:
    id: "Feed.chip.visibility"
- waitForAnimationToEnd

# Tap "My Town" option (gated behind Plus subscription)
- tapOn: "My Town â˜…"
- waitForAnimationToEnd

# Assert the upgrade overlay is displayed
- assertVisible:
    id: "Feed.overlay.upgrade"

# Tap the upgrade CTA button on the overlay
- tapOn:
    id: "Feed.overlay.upgrade.button"
- waitForAnimationToEnd

# Assert SubscriptionScreen loads with the town-specific title
- assertVisible: "Explore Your Whole Town"

# Assert stepper/step indicator is visible (step 1 of 2)
- assertVisible: "Step 1"

- takeScreenshot: "gate-journey-free-to-town-subscription-step1"

# Go back to feed
- back
- waitForAnimationToEnd
